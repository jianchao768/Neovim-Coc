'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const object_1 = require("../../util/object");
class Changes {
    constructor() {
        this.stack = [];
    }
    add(infos) {
        let map = new Map();
        for (let info of infos) {
            map.set(info.lnum, info);
        }
        this.stack.push(map);
    }
    checkInsert(lnums) {
        if (!this.stack.length)
            return undefined;
        let last = this.stack[this.stack.length - 1];
        let arr = Array.from(last.keys()).sort((a, b) => a - b);
        if (!(0, object_1.equals)(arr, lnums))
            return undefined;
        this.stack.pop();
        return Array.from(last.values());
    }
}
exports.default = Changes;
//# sourceMappingURL=changes.js.map