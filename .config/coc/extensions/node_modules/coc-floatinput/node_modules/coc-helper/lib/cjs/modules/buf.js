"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bufModule = void 0;
const VimModule_1 = require("../VimModule");
const coc_nvim_1 = require("coc.nvim");
/**
 * @deprecated Because VimModule deprecated
 */
exports.bufModule = VimModule_1.VimModule.create('buf', (m) => {
    const isNvim = coc_nvim_1.workspace.isNvim;
    const createByName = m.fn('create_by_name', ({ name }) => `
      function! ${name}(name) abort
        return bufadd(a:name)
      endfunction
    `);
    return {
        createByName,
        create: m.fn('create', ({ name }) => isNvim
            ? `
          function! ${name}(...) abort
            let name = get(a:000, 0, '')
            if name is ''
              return nvim_create_buf(v:false, v:true)
            else
              return ${createByName.inlineCall('name')}
            endif
          endfunction
        `
            : `
          function! ${name}(...) abort
            let name = get(a:000, 0, '')
            return ${createByName.inlineCall('name')}
          endfunction
        `),
    };
});
